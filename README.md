# AgriVoice: The Multilingual Crop Doctor üåΩü§ñ

An EcoRevolution Hackathon Project empowering small-scale farmers with AI-driven crop diagnostics in their local language.

## üë• The Team

| Name | Role | Focus Areas |
|------|------|-------------|
| **Kalanza** | üß† Backend AI Lead | Python, FastAPI, Azure Vision/GPT-4, Prompt Engineering |
| **Oram** | üì± Frontend Lead | React, PWA, Mobile UI/UX, Camera Logic |
| **Lewis** | ‚öôÔ∏è Integration Lead | Copilot Studio, Microsoft Fabric, DevOps |

## üìñ Project Overview

AgriVoice is an accessible, mobile-first web application designed to help farmers diagnose crop diseases using Artificial Intelligence. By bridging the gap between advanced technology and rural agriculture, we aim to promote sustainable farming practices and reduce crop loss.

### Key Features

- **Visual Diagnosis**: Snap a photo of a sick plant to detect diseases using Azure Computer Vision
- **AI Agronomist**: Get organic, sustainable treatment plans generated by Azure GPT-4.0
- **Multilingual Support**: All advice translated into the farmer's local language (e.g., Swahili)
- **Voice-First Interface**: "Talk" to the app instead of typing, powered by Azure Speech Services
- **Sustainability Dashboard**: Tracking disease outbreaks to inform community action

## üõ†Ô∏è Tech Stack

- **Frontend**: React (Vite), Node.js, PWA capabilities
- **Backend**: Python, FastAPI, Uvicorn
- **AI Services**: Azure Computer Vision, Azure OpenAI (GPT-4), Azure Speech, Azure Translator
- **Integration**: Microsoft Copilot Studio, Power Automate
- **Data**: Microsoft Fabric

## üöÄ Getting Started

### Prerequisites

- Node.js & npm
- Python 3.9+
- Git

### 1. Backend Setup (Python/FastAPI)

```bash
# Navigate to the backend folder
cd backend-ai

# Create and activate a virtual environment (recommended)
python -m venv venv
# Windows: venv\Scripts\activate
# Mac/Linux: source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Run the Backend Server
uvicorn app.main:app --reload
```

The API will be available at **http://localhost:8000**

### 2. Frontend Setup (React)

Open a new terminal and run:

```bash
# Navigate to the frontend folder
cd frontend-pwa

# Install dependencies
npm install

# Run the Frontend Development Server
npm run dev
```

The App will be available at **http://localhost:5173**

## üìÇ Project Structure

```
AgriVoice/
‚îú‚îÄ‚îÄ backend-ai/                # Python FastAPI Backend
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py            # API Entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/          # Azure integration logic
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routers/           # API Endpoints
‚îú‚îÄ‚îÄ frontend-pwa/              # React Frontend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/        # UI Components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/             # App Pages
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/          # API connection logic
‚îú‚îÄ‚îÄ dashboard-admin/           # Analytics Dashboard
‚îú‚îÄ‚îÄ copilot-config/            # Microsoft Copilot Studio definitions
‚îî‚îÄ‚îÄ README.md                  # Project Documentation
```

## üîê Environment Variables

Create a `.env` file in the `backend-ai` directory with your Azure keys:

```env
AZURE_VISION_KEY=your_key_here
AZURE_VISION_ENDPOINT=your_endpoint_here
AZURE_OPENAI_KEY=your_key_here
AZURE_OPENAI_ENDPOINT=your_endpoint_here
AZURE_SPEECH_KEY=your_key_here
AZURE_SPEECH_REGION=your_region_here
AZURE_TRANSLATOR_KEY=your_key_here
AZURE_TRANSLATOR_REGION=your_region_here
ENVIRONMENT=development
DEBUG=True
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173"]
```

## üìö Documentation

- **Backend**: See `backend-ai/README.md`
- **Frontend**: See `frontend-pwa/README.md`
- **Copilot**: See `copilot-config/README.md`
- **Quick Start**: See `QUICKSTART.md`

## üéØ API Endpoints

- `POST /api/v1/analyze-image` - Analyze crop image
- `POST /api/v1/diagnose` - Get AI diagnosis
- `POST /api/v1/speech-to-text` - Convert voice to text
- `POST /api/v1/text-to-speech` - Convert text to voice

## üåç Supporting African Agriculture

AgriVoice aims to democratize access to agricultural expertise, bringing world-class AI diagnostics to small-scale farmers in Africa.

---

**Status**: Production Ready ‚úÖ  
**Last Updated**: November 24, 2025

## üöÄ Quick Start

### Prerequisites
- Node.js 18+
- Python 3.11+
- Azure subscription with:
  - Computer Vision API
  - OpenAI API (GPT-4)
  - Speech Services
  - Optional: Microsoft Fabric

### 1. Clone & Setup

```bash
git clone <repo-url>
cd AgriVoice

# Create git branches for each team
git checkout -b dev
git checkout -b feat/backend-api    # Kalanza
git checkout -b feat/frontend-ui    # Oram
git checkout -b feat/copilot-integrations  # Lewis
```

### 2. Backend Setup (Kalanza)

```bash
cd backend-ai

# Create virtual environment
python -m venv venv
source venv/Scripts/activate  # Windows
# or: source venv/bin/activate  # Linux/Mac

# Install dependencies
pip install -r requirements.txt

# Setup environment
cp .env.example .env
# Edit .env and add your Azure keys

# Run development server
python -m uvicorn app.main:app --reload
# API runs at http://localhost:8000
```

### 3. Frontend Setup (Oram)

```bash
cd frontend-pwa

# Install dependencies
npm install

# Setup environment
cp .env.example .env
# Verify VITE_API_URL points to backend

# Run development server
npm run dev
# App runs at http://localhost:5173
```

### 4. Dashboard Setup (Lewis)

```bash
cd dashboard-admin

# Install dependencies
npm install

# Run development server
npm run dev
# Dashboard runs at http://localhost:5174
```

## üìö API Documentation & Integration Guide

### Enhanced Diagnosis API (v2)

The new enhanced diagnosis endpoint provides **crop-specific recommendations** with **farmer experience adaptation** and **seasonal context awareness**.

#### Quick Start Example

```bash
# Minimal request (30 seconds to response)
curl -X POST "http://localhost:8000/api/v2/diagnose-enhanced" \
  -H "Content-Type: application/json" \
  -d '{
    "image_base64": "iVBORw0KGgo...",
    "question": "What disease is this?",
    "language": "en"
  }'

# Full context request (crop-aware with experience adaptation)
curl -X POST "http://localhost:8000/api/v2/diagnose-enhanced" \
  -H "Content-Type: application/json" \
  -d '{
    "image_base64": "iVBORw0KGgo...",
    "question": "My maize has brown spots",
    "crop_type": "maize",
    "farmer_experience": "beginner",
    "severity_estimate": "moderate",
    "affected_area": "25%",
    "current_season": "rainy_season",
    "language": "en"
  }'
```

#### API Endpoints

**POST /api/v2/diagnose-enhanced** - Enhanced diagnosis with crop context
- Input: Image, question, crop type, experience level, season
- Output: Disease name, severity, immediate/ongoing actions, timeline, yield impact

**GET /api/v2/crops** - List 10 supported African crops
- Returns: maize, bean, tomato, potato, rice, wheat, cassava, banana, mango, cabbage

**GET /api/v2/severity-levels** - Severity level descriptions
- Returns: mild, moderate, severe with descriptions

**GET /api/v2/experience-levels** - Farmer experience levels
- Returns: beginner, intermediate, experienced

#### Response Example

```json
{
  "status": "success",
  "disease_name": "Gray Leaf Spot (Cercospora zeae-maydis)",
  "severity": "moderate",
  "affected_plant_parts": ["leaves"],
  "confidence_score": 0.85,
  "immediate_actions": [
    "Remove affected lower leaves carefully",
    "Spray neem oil solution every 7-10 days",
    "Ensure proper spacing between plants"
  ],
  "ongoing_actions": [
    "Monitor daily for new symptoms",
    "Maintain consistent watering schedule",
    "Apply copper fungicide if symptoms worsen"
  ],
  "prevention_strategies": [
    "Use resistant varieties next season",
    "Rotate crops to break disease cycle",
    "Plant early in season to avoid peak infection"
  ],
  "timeline_to_recovery": "2-3 weeks",
  "yield_impact": "10-20% if untreated",
  "replanting_needed": false,
  "diagnosis": "Your maize shows signs of fungal leaf spot...",
  "tags": ["leaf damage", "brown spots", "fungal"]
}
```

### Frontend Integration (Oram)

Add the following to your React components:

```jsx
// Step 1: Add crop selector
<select value={cropType} onChange={(e) => setCropType(e.target.value)}>
  <option value="">Select crop type</option>
  <option value="maize">Maize</option>
  <option value="bean">Bean</option>
  <option value="tomato">Tomato</option>
  {/* Get full list from GET /api/v2/crops */}
</select>

// Step 2: Add experience level selection
<select value={experience} onChange={(e) => setExperience(e.target.value)}>
  <option value="beginner">Beginner Farmer</option>
  <option value="intermediate" selected>Intermediate</option>
  <option value="experienced">Experienced Farmer</option>
</select>

// Step 3: Add season selector
<select value={season} onChange={(e) => setSeason(e.target.value)}>
  <option value="">-- Choose Season --</option>
  <option value="rainy_season">Rainy Season</option>
  <option value="dry_season">Dry Season</option>
  <option value="planting_season">Planting Season</option>
</select>

// Step 4: Call API with context
const response = await fetch('/api/v2/diagnose-enhanced', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    image_base64: imageData,
    question: userQuestion,
    crop_type: cropType,
    farmer_experience: experience,
    current_season: season,
    language: 'en'
  })
});

// Step 5: Display structured results
const diagnosis = await response.json();

return (
  <div>
    <h2>{diagnosis.disease_name}</h2>
    
    <div className="severity">
      Severity: <strong>{diagnosis.severity}</strong>
    </div>
    
    <section className="immediate">
      <h3>Do These TODAY:</h3>
      <ul>
        {diagnosis.immediate_actions?.map(action => (
          <li key={action}>{action}</li>
        ))}
      </ul>
    </section>
    
    <section className="ongoing">
      <h3>Next 2-4 Weeks:</h3>
      <ul>
        {diagnosis.ongoing_actions?.map(action => (
          <li key={action}>{action}</li>
        ))}
      </ul>
    </section>
    
    <section className="prevention">
      <h3>Next Season Prevention:</h3>
      <ul>
        {diagnosis.prevention_strategies?.map(strategy => (
          <li key={strategy}>{strategy}</li>
        ))}
      </ul>
    </section>
    
    <div className="metrics">
      <p>Recovery: <strong>{diagnosis.timeline_to_recovery}</strong></p>
      <p>Yield Impact: <strong>{diagnosis.yield_impact}</strong></p>
    </div>
  </div>
);
```

### Copilot Bot Integration (Lewis)

For Microsoft Copilot Studio:

```javascript
// Parse user message to detect crop
const detectCrop = (message) => {
  const cropKeywords = {
    'maize': ['maize', 'corn', 'maize plant'],
    'bean': ['bean', 'beans', 'legume'],
    'tomato': ['tomato', 'tomatoes'],
    'potato': ['potato', 'potatoes'],
    'rice': ['rice']
  };
  
  for (const [crop, keywords] of Object.entries(cropKeywords)) {
    if (keywords.some(kw => message.toLowerCase().includes(kw))) {
      return crop;
    }
  }
  return null;
};

// Call enhanced diagnosis endpoint
const callDiagnosis = async (image, question, crop, experience) => {
  const response = await fetch('/api/v2/diagnose-enhanced', {
    method: 'POST',
    body: JSON.stringify({
      image_base64: image,
      question: question,
      crop_type: crop,
      farmer_experience: experience || 'intermediate',
      language: 'en'
    })
  });
  return response.json();
};

// Format bot response
const formatBotResponse = (diagnosis) => {
  return `I found **${diagnosis.disease_name}** on your crop üåæ

**URGENT - Do these today:**
${diagnosis.immediate_actions.map((a, i) => `${i+1}. ${a}`).join('\n')}

**Continue for the next 2-4 weeks:**
${diagnosis.ongoing_actions.map((a, i) => `${i+1}. ${a}`).join('\n')}

**Recovery timeline:** ${diagnosis.timeline_to_recovery}
**Expected crop impact:** ${diagnosis.yield_impact}`;
};
```

### Supported Crops & Diseases

**10 African Crops:**
- Maize (corn) - 6 diseases, 4 pests
- Bean - 4 diseases, 4 pests
- Tomato - 5 diseases, 4 pests
- Potato - 3 diseases, 3 pests
- Rice - Included
- Wheat - Included
- Cassava - Included
- Banana - Included
- Mango - Included
- Cabbage - Included

### Experience Level Adaptation

**Beginner Farmer:**
- Simpler language and step-by-step instructions
- Fewer actions (1-2 immediate)
- Focus on affordable solutions
- Detailed "how-to" for each action

**Intermediate Farmer:**
- Balanced approach (default)
- Standard management practices
- 2-3 immediate actions
- Mix of organic and practical solutions

**Experienced Farmer:**
- Advanced technical details
- Multiple treatment options
- 2-3 immediate + 3-4 ongoing actions
- Precision agriculture recommendations

### Seasonal Context

The API adapts recommendations based on season:

**Rainy Season:**
- Higher fungal disease pressure
- Focus on moisture management
- Preventive fungicide recommendations

**Dry Season:**
- Focus on pest management
- Water conservation strategies
- Dormant season practices

**Planting Season:**
- Early disease prevention
- Resistant variety recommendations
- Optimal planting timing

## üîê Environment Variables

### Backend (.env)

```bash
# Azure Credentials
AZURE_VISION_ENDPOINT=https://region.api.cognitive.microsoft.com/
AZURE_VISION_KEY=your_key_here

AZURE_OPENAI_ENDPOINT=https://deployment.openai.azure.com/
AZURE_OPENAI_KEY=your_key_here
AZURE_OPENAI_MODEL=gpt-4

AZURE_SPEECH_KEY=your_key_here
AZURE_SPEECH_REGION=your_region

# Microsoft Fabric
FABRIC_WORKSPACE_ID=your_workspace_id
FABRIC_LAKEHOUSE_ID=your_lakehouse_id

# App Config
ENVIRONMENT=development
DEBUG=True
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173"]
```

### Frontend (.env)

```bash
VITE_API_URL=http://localhost:8000
```

## üê≥ Docker Deployment

### Build Backend Image
```bash
cd backend-ai
docker build -t agrivoice-backend:latest .
docker run -p 8000:8000 \
  -e AZURE_VISION_KEY=your_key \
  -e AZURE_OPENAI_KEY=your_key \
  agrivoice-backend:latest
```

### Deploy to Cloud

**Option 1: Render.com**
```bash
# Deploy FastAPI
git push heroku main

# Or use Render dashboard
# - Connect repo
- Select `backend-ai` as root
- Set environment variables
```

**Option 2: Azure App Service**
```bash
az webapp create --resource-group mygroup --plan myplan --name agrivoice-api
az webapp up --name agrivoice-api
```

**Option 3: Railway.app**
```bash
railway link
railway up
```

## üìä Phase Timeline

### Phase 1: Setup & Initialization (Day 1-2)
- ‚úÖ Create monorepo structure
- ‚úÖ Setup .gitignore and git branches
- ‚úÖ Initialize all three sub-projects
- üìù Everyone clones and verifies local setup

### Phase 2: Development (Day 3-10)
- **Kalanza**: Build FastAPI endpoints + Azure integration
- **Oram**: Build React UI + Camera/Audio components
- **Lewis**: Setup Copilot Studio bot + Dashboard

### Phase 3: Integration & Polish (Day 11-15)
- Deploy backend to production URL
- Connect Copilot Studio to production API
- Deploy frontend to Vercel/Netlify
- Create demo video
- Document deployment steps

## üéØ Key Features

### Frontend
- ‚úÖ Mobile-first responsive design
- ‚úÖ Camera capture (rear-facing for farmers)
- ‚úÖ Audio recording for voice questions
- ‚úÖ Real-time image analysis
- ‚úÖ Beautiful results display
- ‚úÖ Offline-first PWA
- ‚úÖ Service Worker for caching

### Backend
- ‚úÖ FastAPI for high performance
- ‚úÖ Azure Computer Vision integration
- ‚úÖ Azure OpenAI/GPT-4 for diagnosis
- ‚úÖ Azure Speech-to-Text/Text-to-Speech
- ‚úÖ Microsoft Fabric logging
- ‚úÖ RESTful API with proper error handling
- ‚úÖ CORS support

### Copilot Integration
- ‚úÖ Custom actions for crop diagnosis
- ‚úÖ Voice input support
- ‚úÖ Image analysis integration
- ‚úÖ Multi-topic support

## üß™ Testing

### Backend Tests
```bash
cd backend-ai
pytest tests/
# Or with coverage:
pytest --cov=app tests/
```

### Frontend Tests
```bash
cd frontend-pwa
npm run test
```

## üìù Git Workflow

```bash
# Create feature branch
git checkout -b feat/your-feature

# Make changes
git add .
git commit -m "feat: description of changes"

# Push to origin
git push origin feat/your-feature

# Create Pull Request
# Request reviews from team members
# Once approved, merge to dev

# For production:
git checkout main
git merge dev
git push origin main
```

## üö® Common Issues & Solutions

### Issue: Azure API Key not found
**Solution**: Ensure `.env` file exists and contains all required keys
```bash
cp .env.example .env
# Edit .env with your actual keys
```

### Issue: CORS errors when calling backend
**Solution**: Update `CORS_ORIGINS` in backend `.env`
```bash
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173"]
```

### Issue: Port already in use
**Solution**: Change port or kill existing process
```bash
# Backend on different port
uvicorn app.main:app --port 8001

# Frontend
npm run dev -- --port 5174
```

## üìû Support & Documentation

- **Backend Docs**: `/backend-ai/README.md`
- **Frontend Docs**: `/frontend-pwa/README.md`
- **Dashboard Docs**: `/dashboard-admin/README.md`
- **Copilot Guide**: `/copilot-config/README.md`

## ü§ù Team Roles

| Role | Person | Focus | Tools |
|------|--------|-------|-------|
| AI Backend Lead | Kalanza | Python, FastAPI, Azure SDKs | Python, FastAPI, Azure |
| Frontend Lead | Oram | React, PWA, Mobile UI | React, Vite, TailwindCSS |
| DevOps & Integration | Lewis | Copilot Studio, Deployment, Dashboard | Node.js, Copilot Studio, Docker |

## üìÑ License

MIT License - See LICENSE file for details

## üôè Acknowledgments

- Microsoft for Azure AI services
- OpenAI for GPT-4 API
- React and FastAPI communities
- Hackathon organizers and mentors

---

**Last Updated**: November 24, 2024
**Version**: 1.0.0
**Status**: Phase 1 - Initialization Complete ‚úÖ
